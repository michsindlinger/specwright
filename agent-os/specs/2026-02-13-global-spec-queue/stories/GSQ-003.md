# GSQ-003: Execution Log Service

## User Story
Als Developer möchte ich ein Execution Log der Queue-Ausführung sehen, damit ich den Fortschritt und eventuelle Fehler nachvollziehen kann.

## Akzeptanzkriterien
- GEGEBEN eine laufende Queue-Ausführung
  WENN ein Spec/Story startet oder endet
  DANN wird ein LogEntry erstellt und per WebSocket gestreamt

- GEGEBEN ein Log mit 500+ Einträgen
  WENN ein neuer Eintrag hinzukommt
  DANN wird der älteste Eintrag entfernt (FIFO)

- GEGEBEN ein Client der sich neu verbindet
  WENN er `queue.log.state` anfragt
  DANN erhält er alle aktuellen Log-Einträge

## Technische Details

**Type:** Backend
**Priority:** High
**Effort:** S (3 SP)
**Abhängigkeiten:** keine

### WAS
- Neuer `execution-log.service.ts` (Singleton)
- Interface `LogEntry` definieren
- WebSocket Messages: `queue.log.entry`, `queue.log.state`

### WIE
- Service Layer: ExecutionLogService als Singleton
- In-Memory Array mit maximal 500 Einträgen
- FIFO-Rotation: shift() wenn limit erreicht
- LogEntry: `{ id, timestamp, type, projectPath, projectName, specId, specName, storyId?, storyTitle?, message }`
- Log-Typen: `spec-start`, `story-start`, `story-complete`, `spec-complete`, `queue-complete`, `error`
- Integration mit queue.handler.ts: Logging bei jedem State-Übergang aufrufen
- WebSocket broadcast für neue Einträge, state-Anfrage für Initial-Load

### WO
- `agent-os-ui/src/server/services/execution-log.service.ts` (new)
- `agent-os-ui/src/server/handlers/queue.handler.ts` (modify - add logging calls)

### Geschätzte Komplexität: S

## DoR Checkliste
- [x] Fachliche Requirements klar
- [x] Akzeptanzkriterien spezifisch und testbar
- [x] Technischer Ansatz definiert (WAS/WIE/WO)
- [x] Abhängigkeiten identifiziert
- [x] Story angemessen dimensioniert
- [x] Alle betroffenen Layer identifiziert (Service)
- [x] Integrationspunkte dokumentiert

## DoD Checkliste
- [x] Code kompiliert ohne Fehler
- [x] Tests passen
- [x] Linter passt
- [x] Kein `any` Types
- [x] Unit Tests für ExecutionLogService
- [x] FIFO-Rotation getestet
- [x] Self-Review completed
